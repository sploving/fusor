#Variables
APP=whiteboxDES

#Usual compilation flags
CFLAGS=-std=c99 -Wall -Wextra -g -O2
CPPFLAGS=-I -DDEBUG
LDFLAGS=-lm

#Special rules and targets
.PHONY: all clean help LtablesGen

#Rules and targets

all: $(APP)

$(APP): WBDES.o main.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

main.o: main.c WBDES.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

LtablesGen: LtablesGen.o DES.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

LtablesGen.o: LtablesGen.c DES.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<	

DES.o: DES.c DES.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

WBDES.o: WBDES.c WBDES.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

clean:
	@rm -f *.o $(APP) LtablesGen

help :
	@echo -e "Usage :"
	@echo -e "  make all		build the software"
	@echo -e "  make LtablesGen	build the lookup tables generator"
	@echo -e "  make clean		remove all files generated by make"
	@echo -e "  make help		display this help"
